@using SecureHR.WebUI.wwwroot.Shared
<aside class="@SidebarCssClass">
    <!-- Sidebar Header -->
    <div class="sidebar-header h-16 flex items-center justify-center border-b border-green-700 px-4">
        <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-green-400 flex-shrink-0"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
            @if (!isCollapsed)
            {
                <h1 class="sidebar-title text-xl font-bold text-white whitespace-nowrap">Secure<span class="text-green-400">HR</span></h1>
            }
        </div>
    </div>
    <!-- Navigation Links -->
    <nav class="flex-grow px-4 py-6 overflow-y-auto">
        @if (!isCollapsed)
        {
            <h3 class="mb-4 text-xs font-semibold text-green-400 uppercase tracking-wider nav-text">Menu</h3>
        }
        <ul class="space-y-2">
            <li>
                <a href="#" class="nav-link flex items-center gap-3 px-3 py-2 rounded-md bg-green-700 text-white font-semibold text-sm @(isCollapsed ? "justify-center" : "")">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    @if (!isCollapsed)
                    {
                        <span class="nav-text">Dashboard</span>
                    }
                </a>
            </li>
            <li>
                <a href="#" class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-green-200 hover:bg-green-700 hover:text-white font-medium text-sm transition-colors @(isCollapsed ? "justify-center" : "")">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    @if (!isCollapsed)
                    {
                        <span class="nav-text">Employees</span>
                    }
                </a>
            </li>
            <li>
                <a href="#" class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-green-200 hover:bg-green-700 hover:text-white font-medium text-sm transition-colors @(isCollapsed ? "justify-center" : "")">
                    <LockIcon />
                    @if (!isCollapsed)
                    {
                        <span class="nav-text">Security & SSO</span>
                    }
                </a>
            </li>
            <li>
                <a href="#" class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-green-200 hover:bg-green-700 hover:text-white font-medium text-sm transition-colors @(isCollapsed ? "justify-center" : "")">
                    <UserCheckIcon />
                    @if (!isCollapsed)
                    {
                        <span class="nav-text">Users & Permissions</span>
                    }
                </a>
            </li>

        </ul>
        @if (!isCollapsed)
        {
            <h3 class="mt-8 mb-4 text-xs font-semibold text-green-400 uppercase tracking-wider nav-text">Administration</h3>
        }
        <ul class="space-y-2">
            <li>
                <a href="#" class="nav-link flex items-center gap-3 px-3 py-2 rounded-md text-green-200 hover:bg-green-700 hover:text-white font-medium text-sm transition-colors @(isCollapsed ? "justify-center" : "")">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path></svg>
                    @if (!isCollapsed)
                    {
                        <span class="nav-text">Security & SSO</span>
                    }
                </a>
            </li>
            <!-- ... other admin items ... -->
        </ul>
    </nav>
    <!-- Sidebar Toggle Button -->
    <div class="border-t border-green-700 p-4">
        <button @onclick="ToggleSidebar" class="w-full flex items-center justify-center gap-3 px-3 py-2 rounded-md text-green-200 hover:bg-green-700 hover:text-white font-medium text-sm transition-colors">
            @if (isCollapsed)
            {
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><rect width="18" height="18" x="3" y="3" rx="2" /><path d="M9 3v18" /><path d="m15 15-3 3-3-3" /></svg>
            }
            else
            {
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="flex-shrink-0"><rect width="18" height="18" x="3" y="3" rx="2" /><path d="M9 3v18" /><path d="m15 9-3-3-3 3" /></svg>
            }
            @if (!isCollapsed)
            {
                <span class="nav-text">Collapse</span>
            }
        </button>
    </div>
</aside>

@code {
    private bool isCollapsed = false;

    private string SidebarCssClass => isCollapsed
        ? "sidebar w-20 flex-shrink-0 bg-green-800 flex flex-col transition-all duration-300 ease-in-out"
        : "sidebar w-64 flex-shrink-0 bg-green-800 flex flex-col transition-all duration-300 ease-in-out";

    private void ToggleSidebar()
    {
        isCollapsed = !isCollapsed;
    }
}